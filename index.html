<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Election Visualizer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Election Simulator and Visualizer">
<meta name="author" content="Andrew L. Parry">
<link rel="stylesheet" href="styles/style.css">
</head>
<body>
<div class="main-container">
    <div class="header-section">
        <h1>Election Visualizer</h1>
        <p class="subtitle">By Andrew L. Parry</p>
    </div>
    
    <div class="canvas-container">
        <canvas id="electionCanvas"></canvas>
    </div>
    
    <div class="controls">
        <div class="modes">
            <button id="one-election-multiple-distributions">One Election, Multiple Distributions</button>
            <button id="multiple-elections-one-distribution">Multiple Elections, One Distribution</button>
        </div>
        
        <h2>Candidates</h2>
        <label for="candidateSlider">Number of candidates: <span id="candidateValue">2</span></label>
        <input type="range" id="candidateSlider" min="2" max="6" value="2">

        <div class="election-types">
            <h2>Voting Method</h2>
            <input type="radio" id="plurality" name="electionType" value="plurality" checked>
            <label for="plurality">Plurality</label><br>
            <input type="radio" id="instant_runoff" name="electionType" value="irv">
            <label for="instant_runoff">Instant Runoff</label><br>
            <input type="radio" id="approval" name="electionType" value="approval">
            <label for="approval">Approval</label><br>
            <input type="radio" id="star" name="electionType" value="star">
            <label for="star">STAR</label><br>
        </div>
        
        <!-- Approval Voting Controls (show/hide based on voting method) -->
        <div id="approval-controls">
            <label for="approvalRadiusSlider">Approval Radius: <span id="approvalRadiusValue">150</span></label>
            <input type="range" id="approvalRadiusSlider" min="50" max="300" value="150">
            
            <div>
                <label><input type="radio" name="votingStrategy" value="strategic" checked> Strategic</label>
                <label><input type="radio" name="votingStrategy" value="honest"> Honest</label>
            </div>
        </div>

        <!-- STAR Voting Controls (show/hide based on voting method) -->
        <div id="star-controls" style="display: none;">
            <label for="starMaxDistanceSlider">Max Distance: <span id="starMaxDistanceValue">300</span></label>
            <input type="range" id="starMaxDistanceSlider" min="100" max="600" value="300" step="10">

            <div style="margin-top: 10px;">
                <label><input type="checkbox" id="displayStarRanges" checked> Display star ranges</label>
            </div>
        </div>

        <button id="resetButton">Reset Positions</button>
        
        <div class="multiple-elections-one-distribution-mode">
            <!-- Content will be populated by JavaScript -->
        </div>
        
        <div class="one-election-multiple-distributions-mode">
            <h2>Distributions</h2>
            <div id="distributions">
                <label for="distributionSlider">Number of distributions: <span id="distributionValue">1</span></label>
                <input type="range" id="distributionSlider" min="1" max="6" value="1">
                <!-- Distribution sections - add this inside the one-election-multiple-distributions-mode div -->
                <div class="distribution-sections">
                    <!-- Distribution 1 -->
                    <div class="distribution-section" id="distribution-1">
                        <h4>Distribution 1</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-1">300</span></label>
                            <input type="range" id="radius-1" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-1">1000</span></label>
                            <input type="range" id="voters-1" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>

                    <!-- Distribution 2 -->
                    <div class="distribution-section" id="distribution-2" style="display: none;">
                        <h4>Distribution 2</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-2">300</span></label>
                            <input type="range" id="radius-2" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-2">1000</span></label>
                            <input type="range" id="voters-2" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>

                    <!-- Distribution 3 -->
                    <div class="distribution-section" id="distribution-3" style="display: none;">
                        <h4>Distribution 3</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-3">300</span></label>
                            <input type="range" id="radius-3" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-3">1000</span></label>
                            <input type="range" id="voters-3" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>

                    <!-- Distribution 4 -->
                    <div class="distribution-section" id="distribution-4" style="display: none;">
                        <h4>Distribution 4</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-4">300</span></label>
                            <input type="range" id="radius-4" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-4">1000</span></label>
                            <input type="range" id="voters-4" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>

                    <!-- Distribution 5 -->
                    <div class="distribution-section" id="distribution-5" style="display: none;">
                        <h4>Distribution 5</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-5">300</span></label>
                            <input type="range" id="radius-5" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-5">1000</span></label>
                            <input type="range" id="voters-5" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>

                    <!-- Distribution 6 -->
                    <div class="distribution-section" id="distribution-6" style="display: none;">
                        <h4>Distribution 6</h4>
                        <div class="slider-group">
                            <label>Radius: <span id="radius-value-6">300</span></label>
                            <input type="range" id="radius-6" min="50" max="500" value="300" step="10">
                        </div>
                        <div class="slider-group">
                            <label>Voters: <span id="voters-value-6">1000</span></label>
                            <input type="range" id="voters-6" min="100" max="3000" value="1000" step="100">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="controls">
        <div class="results">
            <h2>Results</h2>
            <div id="results">Select "One Election, Multiple Distributions" mode and "Plurality" voting to see results.</div>
        </div>
    </div>
</div>
<!-- Load all module files in order -->
<script src="scripts/CanvasRenderer.js"></script>
<script src="scripts/UIController.js"></script>
<script src="scripts/DragHandler.js"></script>
<script src="scripts/VoterDistribution.js"></script>
<script src="scripts/VotingMethods.js"></script>
<script src="scripts/StorageManager.js"></script>
<!-- Main orchestrator MUST be loaded last -->
<script src="scripts/ElectionVisualizer.js"></script>
</body>
</html>